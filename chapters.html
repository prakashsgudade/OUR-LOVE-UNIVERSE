<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Love Journey | Timeline</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Montserrat:wght@300;500;700&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
/* ===== BASE CSS (jaise tune diya) ===== */
body, html {
    margin: 0; padding: 0; 
    min-height: 100%; width: 100%;
    background-color: #050505;
    color: white; font-family: 'Montserrat', sans-serif;
    overflow-x: hidden; /* Mobile pe side scroll rokne ke liye */
}

.gate {
    min-height: 100vh; 
    display: flex; 
    align-items: center; 
    justify-content: center;
    background: radial-gradient(circle, #1a0b0b 0%, #000 100%);
    padding: 20px; /* Mobile edges se gap ke liye */
    box-sizing: border-box;
}

.main-content { 
    text-align: center; 
    z-index: 10; 
    width: 100%;
    max-width: 800px; /* Laptop pe bahut phele na */
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* ===== SEARCH BAR CSS ===== */
.search-container{
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 30px; /* Heading ke niche gap */
    width: 100%;
}

.search-container input{
    padding: 10px 20px;
    border-radius: 30px;
    border: none;
    outline: none;
    background: rgba(0,0,0,0.7);
    color: white;
    font-size: 1rem;
    width: 200px;
    text-align: center;
    margin-bottom: 10px;
}

.search-container button{
    padding: 8px 20px;
    border-radius: 20px;
    border: none;
    cursor: pointer;
    background: #d4af37;
    color: black;
    font-weight: 600;
}

/* ===== HEADER ===== */
header h1{
    font-family:'Cinzel Decorative';
    color:#d4af37;
    font-size:2.8rem;
    letter-spacing:5px;
    text-shadow:0 0 20px rgba(212,175,55,0.5);
    margin:20px 0 10px 0;
}

header p{
    font-family:'Great Vibes';
    font-size:1.8rem;
    color:#ffb3b3;
    margin:0 0 30px 0;
}

/* ===== RESPONSIVE ===== */
@media(max-width:768px){
    header h1{font-size:2rem;}
    header p{font-size:1.4rem;}
    .search-container input{width:150px; font-size:0.9rem;}
    .search-container button{font-size:0.85rem;}
}
</style>
</head>

<body>
<canvas id="space"></canvas>

<div class="gate">
<div class="main-content">

<!-- ===== SEARCH BAR ABOVE HEADING ===== -->
<div class="search-container">
    <input id="daySearch" placeholder="Go to Day..." />
    <button onclick="jumpToDay()">Go</button>
</div>

<header>
<h1>LOVE STORY</h1>
<p>Every moment is a milestone...</p>
</header>

<!-- ===== TIMELINE ===== -->
<div class="timeline-line"></div>
<div id="timeline"></div>

</div>
</div>

<div id="scrollUp" class="nav-arrow">⬆</div>
<div id="scrollDown" class="nav-arrow">⬇</div>
<div id="notification">Welcome Back ❤️</div>

<audio id="bgMusic" src="assets/audio/romantic.mp3" loop></audio>

<script>
// ===== Infinite Virtual Scroll + Chapter Load =====
const START_DATE=new Date("2026-02-06");
const TOTAL=5000;
let today=new Date();
let diff=Math.floor((today-START_DATE)/(1000*60*60*24))+1;

const timeline=document.getElementById("timeline");
const batch=50; // ek time mein render batch of chapters
let rendered=0;
let chapters=[];

for(let i=1;i<=TOTAL;i++){
chapters.push({id:i, unlocked:i<=diff});
}

function renderBatch(){
const fragment=document.createDocumentFragment();
for(let i=rendered;i<Math.min(rendered+batch,chapters.length);i++){
const ch=chapters[i];
let node=document.createElement("div");
node.className="chapter-node";
node.innerHTML=`
<div class="node-dot"></div>
<div class="card ${ch.unlocked?'':'locked'}" onclick="${ch.unlocked?`loadChapter(${ch.id})`:''}">
<span class="day-num">Day ${ch.id}</span>
<span class="day-title">${ch.unlocked?'Unlocked':'Locked'}</span>
</div>
`;
fragment.appendChild(node);
}
timeline.appendChild(fragment);
rendered+=batch;
}

renderBatch();

window.addEventListener("scroll",()=>{
if(window.scrollY+window.innerHeight>=timeline.offsetHeight-100){
renderBatch();
}
});

// ===== Load Chapter =====
function loadChapter(i){
fetch("chapters/day"+i+".html")
.then(r=>r.text())
.then(html=>{document.body.innerHTML=html;});
}

// ===== Music Scroll React =====
window.addEventListener("scroll",()=>{
let a=document.getElementById("bgMusic");
if(a.paused) a.play();
a.volume=Math.min(1,window.scrollY/800);
});

// ===== Scroll Buttons =====
scrollUp.onclick=()=>window.scrollTo({top:0,behavior:"smooth"});
scrollDown.onclick=()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});

// ===== Search Jump =====
function jumpToDay(){
let num=parseInt(daySearch.value);
let nodes=document.querySelectorAll(".chapter-node");
if(nodes[num-1]){
nodes[num-1].scrollIntoView({behavior:"smooth",block:"center"});
}
}

// ===== Stars Particle Background =====
const c=document.getElementById("space");
const ctx=c.getContext("2d");
c.width=innerWidth;
c.height=innerHeight;
let stars=[];
for(let i=0;i<120;i++) stars.push({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*2});
function anim(){
ctx.clearRect(0,0,c.width,c.height);
stars.forEach(s=>{
ctx.beginPath();
ctx.arc(s.x,s.y,s.r,0,6.28);
ctx.fillStyle="white";
ctx.fill();
s.y+=0.2;
if(s.y>c.height)s.y=0;
});
requestAnimationFrame(anim);
}
anim();

// ===== Notification & Memory =====
setTimeout(()=>{notification.style.display="block";},1200);
localStorage.setItem("lastVisit",today);

</script>

</body>
</html>
