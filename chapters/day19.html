<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Day 19 | Pure Love Flow</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Noto+Nastaliq+Urdu&family=Montserrat:wght@100;400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --accent: #ff3366;
            --gold: #d4af37;
            --bg: #000;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body, html {
            height: 100%; width: 100%; background: var(--bg);
            color: white; font-family: 'Montserrat', sans-serif;
            overflow: hidden; /* Prevent default scroll */
        }

        /* --- HEARTBEAT SCANNER --- */
        #lock-screen {
            position: fixed; inset: 0; background: #000; z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.8s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .heart-glow {
            width: 80px; height: 80px; background: var(--accent);
            border-radius: 50%; filter: blur(20px);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse { 0% { transform: scale(1); opacity: 0.5; } 50% { transform: scale(1.5); opacity: 0.2; } 100% { transform: scale(1); opacity: 0.5; } }

        .unlock-btn {
            position: absolute; border: 1px solid var(--accent);
            padding: 12px 30px; border-radius: 30px; color: white;
            font-family: 'Cinzel'; font-size: 0.7rem; cursor: pointer;
            z-index: 10; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px);
        }

        /* --- MAIN GALLERY CONTAINER --- */
        .app-container {
            height: 100vh; display: flex; flex-direction: column;
            padding: 15px; opacity: 0; transition: 1s ease;
        }

        .header { text-align: center; padding: 10px 0; }
        .header h1 { font-family: 'Cinzel'; font-size: 0.8rem; letter-spacing: 4px; color: var(--gold); }

        /* SCROLLABLE AREA */
        .content-flow {
            flex: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            overflow-y: auto; overflow-x: hidden;
            scroll-behavior: smooth; position: relative;
        }

        .photo-card {
            width: 100%; max-width: 400px;
            aspect-ratio: 4/5; background: rgba(255,255,255,0.03);
            border: 1px solid rgba(212,175,55,0.2);
            border-radius: 25px; display: flex; align-items: center;
            justify-content: center; overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            position: relative; cursor: pointer;
        }

        #display-img {
            max-width: 100%; max-height: 100%;
            width: auto; height: auto; object-fit: contain;
            transition: 0.2s ease-out; /* Fast Response */
        }

        /* POETRY SECTION */
        .poetry-wrap { padding: 20px 0; text-align: center; width: 100%; }
        .urdu { font-family: 'Noto Nastaliq Urdu', serif; font-size: 1.3rem; color: var(--gold); line-height: 2; }
        .eng { font-size: 0.75rem; color: #777; font-style: italic; margin-top: 5px; }

        /* NAVIGATION FOOTER */
        .footer-nav {
            display: flex; align-items: center; justify-content: space-between;
            padding: 15px 10px; border-top: 1px solid rgba(255,255,255,0.05);
        }

        .btn-circle {
            width: 50px; height: 50px; border-radius: 50%;
            background: rgba(255,255,255,0.05); border: 1px solid var(--gold);
            color: var(--gold); display: flex; align-items: center; justify-content: center;
            transition: 0.2s;
        }
        .btn-circle:active { background: var(--gold); color: #000; transform: scale(0.9); }

        .counter { font-size: 0.6rem; letter-spacing: 2px; color: #444; }
        .signature { font-family: 'Dancing Script', cursive; font-size: 1.8rem; color: var(--gold); }

        /* Refresh Indicator */
        .refresh-hint { font-size: 0.6rem; color: var(--accent); opacity: 0.5; margin-bottom: 5px; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

    </style>
</head>
<body>

    <div id="lock-screen">
        <div class="heart-glow"></div>
        <div class="unlock-btn" onclick="initApp()">CONNECT HEARTBEAT</div>
    </div>

    <div class="app-container" id="main-app">
        <div class="header">
            <h1>ROYAL GALLERY</h1>
        </div>

        <div class="content-flow" id="flow-area">
            <div class="refresh-hint">PULL DOWN OR TAP TO FLOW</div>
            <div class="photo-card" onclick="fastChange()">
                <img src="" id="display-img">
            </div>
            
            <div class="poetry-wrap">
                <div class="urdu" id="u-txt">محبت کی شروعات</div>
                <p class="eng" id="e-txt">Connecting souls...</p>
            </div>
        </div>

        <div class="footer-nav">
            <button class="btn-circle" onclick="fastChange()">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </button>
            <div class="signature">Prakash</div>
            <button class="btn-circle" onclick="fastChange()">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
            </button>
        </div>
        <center><div class="counter" id="total-seen">0 / 120</div></center>
    </div>

    <script>
        let pool = Array.from({length: 120}, (_, i) => i + 1);
        let seen = 0;

        const quotes = [
            {u: "تمہاری آنکھیں، میری کائنات", e: "Your eyes, my entire universe."},
            {u: "تم ہی میرا سکون ہو", e: "You are my ultimate peace."},
            {u: "تیری مسکراہٹ، میری زندگی", e: "Your smile is my life's light."},
            {u: "محبت تم سے ہے", e: "It's always been you."},
            {u: "روح کا رشتہ", e: "A connection of souls."},
            {u: "خوبصورت احساس", e: "The most beautiful feeling."}
        ];

        function initApp() {
            document.getElementById('lock-screen').style.transform = "translateY(-100%)";
            document.getElementById('main-app').style.opacity = "1";
            pool.sort(() => Math.random() - 0.5);
            fastChange();
        }

        function fastChange() {
            if (pool.length === 0) {
                pool = Array.from({length: 120}, (_, i) => i + 1).sort(() => Math.random() - 0.5);
                seen = 0;
            }

            seen++;
            const photoNum = pool.pop();
            const img = document.getElementById('display-img');
            const uTxt = document.getElementById('u-txt');
            const eTxt = document.getElementById('e-txt');
            const counter = document.getElementById('total-seen');
            
            const q = quotes[Math.floor(Math.random() * quotes.length)];

            // FAST TRANSITION
            img.style.opacity = "0.5";
            img.style.transform = "scale(0.98)";
            
            img.src = `../assets/images/home/m${photoNum}.jpg`;
            
            img.onload = () => {
                img.style.opacity = "1";
                img.style.transform = "scale(1)";
                uTxt.innerText = q.u;
                eTxt.innerText = `"${q.e}"`;
                counter.innerText = `${seen} / 120`;
            };
        }

        // SCROLL TO REFRESH LOGIC
        let touchStart = 0;
        document.getElementById('flow-area').addEventListener('touchstart', e => {
            touchStart = e.touches[0].pageY;
        });

        document.getElementById('flow-area').addEventListener('touchend', e => {
            let touchEnd = e.changedTouches[0].pageY;
            if (touchStart - touchEnd > 100 || touchEnd - touchStart > 100) {
                fastChange(); // Refresh on significant scroll
            }
        });

    </script>
</body>
</html>
