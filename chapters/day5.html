<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memories ‚ù§Ô∏è</title>

<style>
body{
margin:0;
font-family:Segoe UI;
background:linear-gradient(135deg,#141e30,#243b55);
color:white;
display:flex;
align-items:center;
justify-content:center;
min-height:100vh;
}

.container{
width:95%;
max-width:850px;
background:rgba(255,255,255,0.08);
backdrop-filter:blur(12px);
padding:20px;
border-radius:20px;
text-align:center;
}

.photo-box{
width:100%;
height:320px;
display:flex;
align-items:center;
justify-content:center;
background:black;
border-radius:15px;
overflow:hidden;
margin-top:15px;
}

#photo{
max-width:100%;
max-height:100%;
object-fit:contain;
}

#letter{
margin-top:15px;
font-size:19px;
min-height:80px;
}

button{
padding:12px 20px;
border:none;
border-radius:25px;
background:#ff0066;
color:white;
cursor:pointer;
margin-top:10px;
}

.music{margin-top:20px;}
</style>

</head>

<body>

<div class="container">

<h2>Memories ‚ù§Ô∏è</h2>

<button onclick="generate()">Generate Letter</button>

<div id="letter"></div>

<input type="file" id="photos" multiple accept="image/*">

<div class="photo-box">
<img id="photo">
</div>

<div class="music">
<h3>üéµ Add Song</h3>
<input type="file" id="music" accept="audio/*">
<br>
<audio id="player" controls></audio>
</div>

<button onclick="clearData()">Reset Photos</button>

</div>

<script>

const letters=[
"Tum meri har soch ki shuruaat ho ‚ù§Ô∏è",
"Tum meri yaadon ki sabse khoobsurat tasveer ho.",
"Har letter ke saath ek yaad badalti hai.",
"Tum meri kahani ka favourite frame ho.",
"Tum ho to sab perfect hai."
];

let pics=[];
let index=0;

// LOAD SAVED PHOTOS
window.onload=()=>{
let saved=localStorage.getItem("muskanPhotos");
if(saved){
pics=JSON.parse(saved);
if(pics.length>0) photo.src=pics[0];
}
};

// ADD PHOTOS
photos.onchange=e=>{
pics=[];
let readers=[];

[...e.target.files].forEach(f=>{
const r=new FileReader();
r.onload=ev=>{
pics.push(ev.target.result);

if(pics.length===e.target.files.length){
localStorage.setItem("muskanPhotos",JSON.stringify(pics));
photo.src=pics[0];
}
}
r.readAsDataURL(f);
});
};

// LETTER + PHOTO CHANGE
function generate(){
letter.innerText=
letters[Math.floor(Math.random()*letters.length)];

if(pics.length>0){
index=(index+1)%pics.length;
photo.src=pics[index];
}
}

// RESET
function clearData(){
localStorage.removeItem("muskanPhotos");
location.reload();
}

// MUSIC
music.onchange=e=>{
player.src=URL.createObjectURL(e.target.files[0]);
}

</script>

</body>
</html>
